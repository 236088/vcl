　本ソースコードは，筆者が卒業論文に向け行った研究「微分可能レンダリングのためのモジュール式パイプライン」における実験環境である．

## 概要

　微分可能レンダラは，画像よりメッシュ形状・テクスチャ色・反射特性などのレンダリングパラメータを推定するインバースレンダリング手法の一種であり，機械学習における勾配法をレンダリングパイプラインに取り込んだパラメータ推定手法である．近年のインバースレンダリング手法の多くは，特定のレンダリングパラメータの学習に特化したアルゴリズムを採用しているため，あらゆるパラメータの学習を可能とするような柔軟性・汎用性には富んでいない．そこで，Raineらは，プリミティブと呼ばれる処理単位を定義し，それらを組み合わせてパイプラインを構築する，モジュール式の微分可能レンダリングパイプラインを提案した．これにより，柔軟なパイプライン設計と，自由な学習対象パラメータ設定を可能とし，ユーザ定義で拡張も可能な微分可能レンダラを構築させた．
　本研究では，Raineらの提案する微分可能レンダラの追実装・追実験を行ったうえで，独自定義のプリミティブによる機能拡張を目指す．
 
## プリミティブ

　プリミティブの定義においては，通常のレンダリングパスと同様のフォワードパスと，フォワードパスの演算における，入力パラメータでの偏微分値を定義したバックワードパスが必要とされる．プリミティブを組み合わせパイプラインを構築する際，フォワードパスでは，自身のプリミティブの出力は後継のプリミティブの入力として接続される．バックワードパスにおいては，後続のプリミティブより，そのプリミティブの入力パラメータに関する損失関数の勾配値が逆伝播されてくると，微分の推移律に従って，自身のプリミティブで定義された偏微分値を乗算することで，自身のプリミティブの入力パラメータに関する損失関数の勾配値が計算される．

### 基本プリミティブ
　
 モデルの座標変換を担うProjectionプリミティブ，プロジェクション座標からピクセルごとの三角形の重心座標を求めるRasterizationプリミティブ，重心座標から頂点属性補間値を求めるInterpolationプリミティブは，基本プリミティブとして分類する．
 
### Texture Mapping プリミティブ

　Raineらは，MIPマップの使用により，広域にわたるピクセル領域のテクスチャ色の学習を進められる手法を推奨した．
　PrestEarth は Texture Mapping プリミティブの有用性を測る実験サンプルである．

### Antialiasing プリミティブ

　Raineらは，三角形IDの異なるピクセル間で線分が横切る位置によって，移す色量を決定するアンチエイリアシング手法を提案した．これにより，このプリミティブよりプロジェクション座標への逆伝播を促すことができ，特に背景とオブジェクトとの境界において正しい境界線へと誘導しているため，スクリーン全体としては正しいシルエットを得る働きをしている．
　PresetCube は Antialiasing プリミティブの有用性を測る実験サンプルである．
 
### Phong Shading プリミティブ

　Phong のシェーディングモデルを実装し，反射特性のパラメータ学習に取り組んだ．
　PresetPhong は Phong Shading プリミティブの実験サンプルである．

### Gaussian Finltering プリミティブ

　フィルタ強度を連続的に変えることができるガウシアンフィルタを独自に定義し，拡張したプリミティブである．
　PresetGaussian は Gaussian Finltering プリミティブの実験サンプルである．
 
## DEV

Visual Studio 2019

CUDA 11.4

NuGet package : nupengl.core, glm

## link
[This GitHub Branch](https://github.com/236088/vcl/tree/recruit)

[Modular Primitives for High-Performance Differentiable Rendering](https://arxiv.org/abs/2011.03277)
[PDF](https://arxiv.org/pdf/2011.03277.pdf)
[GitHub](https://github.com/NVlabs/nvdiffrast)
